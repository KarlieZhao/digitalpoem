<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Writing Lines (Taper #10)</title>

    <!-- “Writing Lines” Copyright (C) 2023 Author

Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright 
notice and this notice are preserved. This file is offered as-is,
without any warranty.

Starting from a sentence with minor mistakes, 
this piece of code iterates over the sentence 10 times, ending up making more and more mistakes. 
Writing lines might bring us back to childhood memories of writing the same words over and over again, 
to learn or to practice, or being punished, 
or happening outside of writing but in playing musical instruments, rehearsing performances.

There should be something poetic in the definition of insanity, 
doing the same thing over and over and expecting different results. 
For instance, there is semantic satiation, 
a common psychological phenomenon in which repetition causes a word or phrase to temporarily lose meaning to a person. 
In this poem, the digital memory remembers all of the mistakes that have been made, 
and then brings us back, along the path where these mistakes happened. 
In some other cases, perhaps, 10 repetitions are enough for us to remember something, or forget something.

-->

    <style>
        body {
            margin: 0;
            overflow: hidden
        }
        
        a {
            color: #eee;
            text-decoration: none
        }
        
        header {
            margin: 0;
            padding: 0;
            background-color: #eee;
            color: #555;
            position: relative;
            z-index: 1000
        }
        
        header a {
            color: #000;
            text-decoration: none
        }
        
        header>h1 {
            margin: 0;
            font-size: 12px;
            font-family: sans-serif;
            border-bottom: 1px #999 solid;
            padding: 5px 10px;
            line-height: 17px
        }
    </style>
</head>

<body>
    <header id=nav>
        <h1>
            <a href="index.html">Writing Lines</a> by
            <a href="https://theunthoughts.com/" target="_blank">¡wénrán zhào!</a>: Jan 2023<br>
            <a href="../walktothesea/index.html">&lt;&lt; Prev</a> &mdash;
            <a href="../lecsicon/index.html">Next &gt;&gt;</a>
            <a href="../index.html"> &mdash;  Back  </a></h1>
    </header>

    <div id="text" style="font-size: 1.3vw; line-height: 3vw; font-family: 'Courier New', monospace; font-weight: bold; height: 92vh; background-color:#F1F5F8; margin: auto; text-align: center; padding-top: 7%;">
    </div>

    <script>
        let text = "I'm typing my mistakes for 10 times so that I won't make any mistakes.";
        const keys = {
                q: ["w", "a"],
                w: ["q", "e", "s"],
                e: ["w", "r", "d"],
                r: ["e", "t", "f"],
                t: ["r", "y", "g"],
                y: ["t", "u", "h"],
                u: ["y", "i", "j"],
                i: ["u", "o", "k"],
                o: ["i", "p", "l"],
                p: ["o", "l"],
                a: ["q", "s", "z"],
                s: ["w", "a", "d", "x", "z"],
                d: ["e", "s", "f", "c", "x"],
                f: ["r", "d", "g", "v", "c"],
                g: ["t", "f", "h", "b", "v"],
                h: ["y", "g", "j", "n", "b"],
                j: ["u", "h", "k", "m", "n"],
                k: ["i", "j", "l", "m"],
                l: ["o", "k"],
                z: ["a", "s", "x"],
                x: ["s", "d", "z", "c"],
                c: ["d", "f", "x", "v"],
                v: ["f", "g", "c", "b"],
                b: ["g", "h", "v", "n"],
                n: ["h", "j", "b", "m"],
                m: ["j", "k", "n"]
            },
            cap = /([A-Z])/g,
            lower = /([a-z])/g;
        let newtext, chance, count, speed, index, lines, main, reverse_start, timer;

        function refresh() {
            newtext = "", chance = .03, count = 9, speed = 70, index = 0, lines = [], reverse_start = !1, timer = 0
        }

        function writeLines() {
            if (newtext = "", 10 === lines.length && (reverse_start = !0), reverse_start) 9 === count && (document.getElementById("text").innerHTML = ""), speed += 4, newtext = lines[count], count < 0 ? (document.getElementById("text").innerHTML = "", reverse_start = !1, refresh()) : (typeWriter(), count--);
            else {
                for (var e in text) {
                    if (letter = text[e], Math.random() < chance)
                        if (cap.test(letter)) {
                            let e = keys[letter.toLowerCase()];
                            letter = e[Math.floor(Math.random() * e.length)].toUpperCase()
                        } else {
                            var t;
                            lower.test(letter) && (t = keys[letter], letter = t[Math.floor(Math.random() * t.length)])
                        }
                    newtext += letter
                }
                lines.push(newtext), typeWriter(), speed -= 4, chance += .1
            }
            main = setTimeout(writeLines, 115 * speed)
        }
        refresh(), main = setTimeout(writeLines, 500);
        let type;

        function typeWriter() {
            index < newtext.length ? (document.getElementById("text").innerHTML += newtext.charAt(index), type = setTimeout(typeWriter, speed), index++) : (document.getElementById("text").innerHTML += "<br>", index = 0)
        }
        document.addEventListener("visibilitychange", function() {
            document.hidden ? (clearTimeout(type), clearTimeout(main)) : (main = setTimeout(writeLines, 115 * speed), setTimeout(typeWriter, speed))
        });
    </script>

</body>

</html>